(()=>{"use strict";var e,r,t,n,o={342:(e,r,t)=>{t.d(r,{Z:()=>s});var n=t(689),o=t.n(n);const c=function(e){var r=e.productList,t=void 0===r?[]:r;return null==t?void 0:t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.title,t=e.description,n=e.price,c=e.outOfStock;return o().createElement("div",null,o().createElement("h3",null,r),o().createElement("p",null,t),o().createElement("p",null,n),o().createElement("p",null,c?"Item Out Of Stock":"In Stock"))}))};var a,i=t(977);function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,c,a,i=[],l=!0,u=!1;try{if(c=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=c.call(t)).done)&&(i.push(n.value),i.length!==r);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}const s=function(e){var r,t,u=e.productList,s=l((0,n.useState)(u),2),p=s[0],d=s[1],f=l((0,i.useQuery)({query:(0,i.gql)(a||(r=["\n    query {\n      Products {\n        title\n        description\n        price\n        outOfStock\n      }\n    }"],t||(t=r.slice(0)),a=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(t)}}))))}),2),v=f[0],y=f[1];console.log("-------\x3e result",v);var h=v||{},m=h.data,b=(void 0===m?{}:m).Products,g=h.data;return h.fetching,h.error,(0,n.useEffect)((function(){var e;console.log("products>>",null==g?void 0:g.Products),null!=g&&null!==(e=g.Products)&&void 0!==e&&e.length&&d(b)}),[g]),o().createElement("div",{className:"App"},o().createElement("h3",null,"App Client"),o().createElement(c,{productList:p}),o().createElement("button",{onClick:function(){console.log("data on client side refresh >>",b),y({requestPolicy:"network-only"})}},"Refresh Products"))}},497:(e,r,t)=>{t.a(e,(async(e,n)=>{try{t.r(r),t(404);var o=t(860),c=t.n(o),a=t(689),i=t.n(a),l=t(684),u=t.n(l),s=t(99),p=t(977),d=t(809),f=t.n(d),v=t(342),y=c()(),h=(0,s.ssrExchange)({isClient:!1}),m=(0,s.createClient)({url:"http://localhost:3006/graphql",fetch:f(),exchanges:[s.dedupExchange,s.cacheExchange,h,s.fetchExchange]}),b=(await m.query("{\n    Products {\n        title\n        description\n        price\n        outOfStock\n      }\n}").toPromise()||{}).data,g=(void 0===b?{}:b).Products,S=void 0===g?[]:g;console.log("Products --\x3e",S);var _=u().renderToString(i().createElement(p.Provider,{value:m},i().createElement(v.Z,{productList:S})));y.use(c().static("build",{type:"application/javascript"})),y.get("/",(function(e,r){r.send('\n    <html>\n    <head>\n      <title>My SSR App</title>\n    </head>\n    <body>\n      <div id="root">'.concat(_,"</div>\n      <script>\n        window.__PRODUCT_LIST__ = ").concat(JSON.stringify(S),';\n      <\/script>\n      <script src="./client/client.js"><\/script>\n    </body>\n  </html>\n    '))})),y.listen(process.env.PORT,(function(){console.log("App running at port",process.env.PORT)})),n()}catch(e){n(e)}}),1)},404:(e,r,t)=>{const n=require("dotenv");t.n(n)().config()},99:e=>{e.exports=require("@urql/core")},860:e=>{e.exports=require("express")},809:e=>{e.exports=require("node-fetch")},689:e=>{e.exports=require("react")},684:e=>{e.exports=require("react-dom/server")},977:e=>{e.exports=require("urql")}},c={};function a(e){var r=c[e];if(void 0!==r)return r.exports;var t=c[e]={exports:{}};return o[e](t,t.exports,a),t.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(o,c,a)=>{var i;a&&((i=[]).d=1);var l,u,s,p=new Set,d=o.exports,f=new Promise(((e,r)=>{s=r,u=e}));f[r]=d,f[e]=e=>(i&&e(i),p.forEach(e),f.catch((e=>{}))),o.exports=f,c((o=>{var c;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var c=[];c.d=0,o.then((e=>{a[r]=e,n(c)}),(e=>{a[t]=e,n(c)}));var a={};return a[e]=e=>e(c),a}}var i={};return i[e]=e=>{},i[r]=o,i})))(o);var a=()=>l.map((e=>{if(e[t])throw e[t];return e[r]})),u=new Promise((r=>{(c=()=>r(a)).r=0;var t=e=>e!==i&&!p.has(e)&&(p.add(e),e&&!e.d&&(c.r++,e.push(c)));l.map((r=>r[e](t)))}));return c.r?u:a()}),(e=>(e?s(f[t]=e):u(d),n(i)))),i&&(i.d=0)},a.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return a.d(r,{a:r}),r},a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=a(497),l=exports;for(var u in i)l[u]=i[u];i.__esModule&&Object.defineProperty(l,"__esModule",{value:!0})})();